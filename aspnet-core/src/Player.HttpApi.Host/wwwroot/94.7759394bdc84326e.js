"use strict";(self.webpackChunkPlayer=self.webpackChunkPlayer||[]).push([[94],{8094:(q,M,c)=>{c.d(M,{$T:()=>V,U6:()=>X});var v=c(655),m=c(9808),t=c(6435),E=c(8929),I=c(2198),u=c(2986),x=c(7625),d=c(276),y=c(1004),g=c(1314),T=c(7429),P=c(1159),A=c(1684),S=c(9547),b=c(6245),f=c(5812),D=c(226),L=c(6382);class w{constructor(){this.keyboard=!0,this.noAnimation=!1,this.maskClosable=!0,this.closeOnNavigation=!0}}class B{constructor(s,e,n){this.previewInstance=s,this.config=e,this.overlayRef=n,n.keydownEvents().pipe((0,I.h)(o=>this.config.keyboard&&o.keyCode===P.hY&&!(0,P.Vb)(o))).subscribe(o=>{o.preventDefault(),this.close()}),n.detachments().subscribe(()=>{this.overlayRef.dispose()}),s.containerClick.pipe((0,u.q)(1)).subscribe(()=>{this.close()}),s.closeClick.pipe((0,u.q)(1)).subscribe(()=>{this.close()}),s.animationStateChanged.pipe((0,I.h)(o=>"done"===o.phaseName&&"leave"===o.toState),(0,u.q)(1)).subscribe(()=>{this.dispose()})}switchTo(s){this.previewInstance.switchTo(s)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.previewInstance.startLeaveAnimation()}dispose(){this.overlayRef.dispose()}}function O(i,s,e){const n=i+s,o=(s-e)/2;let a=null;return s>e?(i>0&&(a=o),i<0&&n<e&&(a=-o)):(i<0||n>e)&&(a=i<0?o:-o),a}const Z=["imgRef"];function z(i,s){if(1&i&&t._UZ(0,"img",13,14),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Udp("width",e.width)("height",e.height)("transform",n.previewImageTransform),t.uIk("src",e.src,t.LSH)("srcset",e.srcset,t.LSH)("alt",e.alt)}}function K(i,s){if(1&i&&(t.ynx(0),t.YNc(1,z,2,9,"img",12),t.BQk()),2&i){const e=s.index,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.index===e)}}function H(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",15),t.NdJ("click",function(){return t.CHM(e).$implicit.onClick()}),t._UZ(1,"span",16),t.qZA()}if(2&i){const e=s.$implicit,n=t.oxw();t.ekj("tds-image-preview-operations-operation-disabled",n.zoomOutDisabled&&"zoomOut"===e.type),t.Q6J("ngClass",n.zoomOutDisabled&&"zoomOut"===e.type?"text-neutral-1-900":"text-white"),t.xp6(1),t.Q6J("ngClass",e.icon)}}function G(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.NdJ("click",function(o){return t.CHM(e),t.oxw().onSwitchLeft(o)}),t._UZ(2,"span",18),t.qZA(),t.TgZ(3,"div",19),t.NdJ("click",function(o){return t.CHM(e),t.oxw().onSwitchRight(o)}),t._UZ(4,"span",20),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(1),t.ekj("tds-image-preview-switch-left-disabled",e.index<=0),t.Q6J("ngClass",e.index<=0?"text-neutral-1-900":"text-white"),t.xp6(2),t.ekj("tds-image-preview-switch-right-disabled",e.index>=e.images.length-1),t.Q6J("ngClass",e.index>=e.images.length-1?"text-neutral-1-900":"text-white")}}const p={x:0,y:0};let j=(()=>{class i{constructor(e,n,o,a){var r,l;this.cdr=e,this.tdsConfigService=n,this.config=o,this.overlayRef=a,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new t.vpe,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"tdsi-rotate-left-line",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"},{icon:"tdsi-rotate-right-line",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"tdsi-zoom-out-line",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"tdsi-zoom-in-line",onClick:()=>{this.onZoomIn()},type:"zoomIn"}],this.zoomOutDisabled=!1,this.position=Object.assign({},p),this.containerClick=new t.vpe,this.closeClick=new t.vpe,this.destroy$=new E.xQ,this.zoom=null!==(r=this.config.zoom)&&void 0!==r?r:1,this.rotate=null!==(l=this.config.rotate)&&void 0!==l?l:0,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}get animationDisabled(){var e;return null!==(e=this.config.noAnimation)&&void 0!==e&&e}get maskClosable(){var e,n;const o=this.tdsConfigService.getConfigForComponent("image")||{};return null===(n=null!==(e=this.config.maskClosable)&&void 0!==e?e:o.maskClosable)||void 0===n||n}setImages(e){this.images=e,this.cdr.markForCheck()}switchTo(e){this.index=e,this.cdr.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.closeClick.emit()}onZoomIn(){this.zoom+=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=Object.assign({},p)}onZoomOut(){this.zoom>1&&(this.zoom-=1,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=Object.assign({},p))}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onContainerClick(e){e.target===e.currentTarget&&this.maskClosable&&this.containerClick.emit()}onAnimationStart(e){"enter"===e.toState?this.setEnterAnimationClass():"leave"===e.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}onAnimationDone(e){"enter"===e.toState?this.setEnterAnimationClass():"leave"===e.toState&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}startLeaveAnimation(){this.animationState="leave",this.cdr.markForCheck()}onDragStarted(){this.isDragging=!0}onDragReleased(){this.isDragging=!1;const e=this.imageRef.nativeElement.offsetWidth*this.zoom,n=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:o,top:a}=function W(i){const s=i.getBoundingClientRect(),e=document.documentElement;return{left:s.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||document.body.clientLeft||0),top:s.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||document.body.clientTop||0)}}(this.imageRef.nativeElement),{width:r,height:l}=function F(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}(),_=this.rotate%180!=0,C=function U(i){let s={};return i.width<=i.clientWidth&&i.height<=i.clientHeight&&(s={x:0,y:0}),(i.width>i.clientWidth||i.height>i.clientHeight)&&(s={x:O(i.left,i.width,i.clientWidth),y:O(i.top,i.height,i.clientHeight)}),s}({width:_?n:e,height:_?e:n,left:o,top:a,clientWidth:r,clientHeight:l});((0,S.DX)(C.x)||(0,S.DX)(C.y))&&(this.position=Object.assign(Object.assign({},this.position),C))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}setEnterAnimationClass(){if(this.animationDisabled)return;const e=this.overlayRef.backdropElement;e&&(e.classList.add("tds-fade-enter"),e.classList.add("tds-fade-enter-active"))}setLeaveAnimationClass(){if(this.animationDisabled)return;const e=this.overlayRef.backdropElement;e&&(e.classList.add("tds-fade-leave"),e.classList.add("tds-fade-leave-active"))}reset(){this.zoom=1,this.rotate=0,this.position=Object.assign({},p)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(d.g3),t.Y36(w),t.Y36(g.Iu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["tds-image-preview"]],viewQuery:function(e,n){if(1&e&&t.Gf(Z,5),2&e){let o;t.iGM(o=t.CRH())&&(n.imageRef=o.first)}},hostAttrs:["tabindex","-1","role","document",1,"fixed","inset-0","overflow-auto","bg-black","bg-opacity-40"],hostVars:8,hostBindings:function(e,n){1&e&&(t.WFA("@fadeMotion.start",function(a){return n.onAnimationStart(a)})("@fadeMotion.done",function(a){return n.onAnimationDone(a)}),t.NdJ("click",function(a){return n.onContainerClick(a)})),2&e&&(t.d8E("@.disabled",n.config.noAnimation)("@fadeMotion",n.animationState),t.Udp("z-index",n.config.zIndex),t.ekj("tds-image-preview-moving",n.isDragging)("tds-image-preview-wrap",!0))},exportAs:["tdsImagePreview"],decls:13,vars:6,consts:[[1,"tds-image-preview","pointer-events-none","h-full","text-center","m-0","p-0"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"tds-image-preview-content","m-0","p-0","w-full","h-full"],[1,"tds-image-preview-body","absolute","inset-0","overflow-hidden"],[1,"tds-image-preview-operations","box-border","absolute","m-0","p-0","top-6","right-6","pointer-events-auto",2,"z-index","1"],[1,"tds-image-preview-operations-operation","flex","items-center","justify-center","cursor-pointer",3,"click"],["tds-button-close","",1,"tds-image-preview-operations-icon","text-white","dark:text-white"],["cdkDrag","",1,"tds-image-preview-img-wrapper","absolute","inset-0","flex","items-center","justify-center",3,"cdkDragFreeDragPosition","mousedown","cdkDragReleased"],[4,"ngFor","ngForOf"],[1,"tds-image-preview-operations","pointer-events-auto","box-border","absolute","m-0","cursor-pointer","bottom-0","right-0","flex","justify-center","items-center","w-full","bg-black","bg-opacity-40","py-3",2,"z-index","1"],["class","tds-image-preview-operations-operation mr-5  cursor-pointer  flex ",3,"ngClass","tds-image-preview-operations-operation-disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkDragHandle","","class","tds-image-preview-img text-center pointer-events-auto",3,"width","height","transform",4,"ngIf"],["cdkDragHandle","",1,"tds-image-preview-img","text-center","pointer-events-auto"],["imgRef",""],[1,"tds-image-preview-operations-operation","mr-5","cursor-pointer","flex",3,"ngClass","click"],[1,"tds-image-preview-operations-icon","text-xl","leading-none",3,"ngClass"],[1,"tds-image-preview-switch-left","pointer-events-auto","-mt-5","cursor-pointer","rounded-full","bg-black","bg-opacity-40","text-white","left-5","absolute","top-1/2","flex","items-censter","z-10","p-5",3,"ngClass","click"],[1,"tdsi-arrow-left-line","text-xl","leading-none"],[1,"tds-image-preview-switch-right","rounded-full","-mt-5","pointer-events-auto","cursor-pointer","bg-black","bg-opacity-40","text-white","absolute","top-1/2","right-5","flex","items-censter","z-10","p-5",3,"ngClass","click"],[1,"tdsi-arrow-right-line","text-xl","leading-none"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return n.onClose()}),t._UZ(6,"button",6),t.qZA()(),t.TgZ(7,"div",7),t.NdJ("mousedown",function(){return n.onDragStarted()})("cdkDragReleased",function(){return n.onDragReleased()}),t.YNc(8,K,2,1,"ng-container",8),t.qZA(),t.TgZ(9,"ul",9),t.YNc(10,H,2,4,"li",10),t.qZA(),t.YNc(11,G,5,6,"ng-container",11),t.qZA()(),t._UZ(12,"div",1),t.qZA()),2&e&&(t.xp6(7),t.Udp("transform",n.previewImageWrapperTransform),t.Q6J("cdkDragFreeDragPosition",n.position),t.xp6(1),t.Q6J("ngForOf",n.images),t.xp6(2),t.Q6J("ngForOf",n.operations),t.xp6(1),t.Q6J("ngIf",n.images.length>1))},directives:[b.Gp,f.Zt,m.sg,m.O5,f.Bh,m.mk],encapsulation:2,data:{animation:[A.MC]},changeDetection:0}),i})(),k=(()=>{class i{constructor(e,n,o,a){this.overlay=e,this.injector=n,this.tdsConfigService=o,this.directionality=a}preview(e,n){return this.display(e,n)}display(e,n){const o=Object.assign(Object.assign({},new w),null!=n?n:{}),a=this.createOverlay(o),r=this.attachPreviewComponent(a,o);r.setImages(e);const l=new B(r,o,a);return r.previewRef=l,l}attachPreviewComponent(e,n){const o=t.zs3.create({parent:this.injector,providers:[{provide:g.Iu,useValue:e},{provide:w,useValue:n}]}),a=new T.C5(j,null,o);return e.attach(a).instance}createOverlay(e){var n,o;const a=this.tdsConfigService.getConfigForComponent("image")||{},r=new g.X_({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:null===(o=null!==(n=e.closeOnNavigation)&&void 0!==n?n:a.closeOnNavigation)||void 0===o||o,backdropClass:"tds-image-preview-mask",direction:e.direction||a.direction||this.directionality.value});return this.overlay.create(r)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(g.aV),t.LFG(t.zs3),t.LFG(d.g3),t.LFG(D.Is,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const J=["*"];let Y=(()=>{class i{constructor(){this.images=[]}addImage(e){this.images.push(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["tds-image-group"]],exportAs:["tdsImageGroup"],ngContentSelectors:J,decls:1,vars:0,template:function(e,n){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),V=(()=>{class i{constructor(e,n,o,a,r,l,_){this.document=e,this.tdsConfigService=n,this.elementRef=o,this.tdsImageService=a,this.cdr=r,this.parentGroup=l,this.directionality=_,this._TDSModuleName="image",this.tdsSrc="",this.srcset="",this.disablePreview=!1,this.fallback=null,this.placeholder=null,this.status="normal",this.destroy$=new E.xQ}get previewable(){return!this.disablePreview&&"error"!==this.status}ngOnInit(){var e;this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(null===(e=this.directionality.change)||void 0===e||e.pipe((0,x.R)(this.destroy$)).subscribe(n=>{this.dir=n,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){const e=this.parentGroup.images.filter(r=>r.previewable),n=e.map(r=>({src:r.tdsSrc,srcset:r.srcset})),o=e.findIndex(r=>this===r);this.tdsImageService.preview(n,{direction:this.dir}).switchTo(o)}else this.tdsImageService.preview([{src:this.tdsSrc,srcset:this.srcset}],{direction:this.dir})}getElement(){return this.elementRef}ngOnChanges(e){const{tdsSrc:n}=e;n&&(this.getElement().nativeElement.src=n.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.tdsSrc,this.backLoadImage.srcset=this.srcset,this.status="loading",this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.tdsSrc,this.getElement().nativeElement.srcset=this.srcset):(this.placeholder?(this.getElement().nativeElement.src=this.placeholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.tdsSrc,this.getElement().nativeElement.srcset=this.srcset),this.backLoadImage.onload=()=>{this.status="normal",this.getElement().nativeElement.src=this.tdsSrc,this.getElement().nativeElement.srcset=this.srcset},this.backLoadImage.onerror=()=>{this.status="error",this.fallback&&(this.getElement().nativeElement.src=this.fallback,this.getElement().nativeElement.srcset="")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.K0),t.Y36(d.g3),t.Y36(t.SBq),t.Y36(k),t.Y36(t.sBO),t.Y36(Y,8),t.Y36(D.Is,8))},i.\u0275dir=t.lG2({type:i,selectors:[["img","tds-image",""]],hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.onPreview()})},inputs:{tdsSrc:"tdsSrc",srcset:"srcset",disablePreview:"disablePreview",fallback:"fallback",placeholder:"placeholder"},exportAs:["tdsImage"],features:[t.TTD]}),(0,v.gn)([(0,y.yF)(),(0,d.oS)()],i.prototype,"disablePreview",void 0),(0,v.gn)([(0,d.oS)()],i.prototype,"fallback",void 0),(0,v.gn)([(0,d.oS)()],i.prototype,"placeholder",void 0),i})(),X=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[k],imports:[[D.vT,g.U8,T.eL,f._t,m.ez,L.K,b.H9]]}),i})()}}]);